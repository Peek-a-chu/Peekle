# S4-6. 협업 IDE 및 제출 시스템 (Center Panel)

## 📌 Story Information
- **Epic**: Epic-04 (Study)
- **Story ID**: S4-6
- **Sprint**: TBD
- **Estimated Effort**: 3 days
- **Priority**: High
- **Dependencies**: Epic-00 (IDE)
- **Status**: Ready

---

## 🧾 User Story

**As a** 사용자
**I want to** 코드를 작성하고 백준에 자동으로 제출하고 싶다
**So that** IDE에서 작성한 코드를 복사하고 붙여넣는 번거로움을 줄이기 위함이다

---

## ✅ Acceptance Criteria

1. **IDE 설정**
   - 테마, 언어 선택(C++/Python/Java)이 가능해야 한다.

2. **제출 버튼**
   - 클릭 시 현재 코드가 클립보드에 복사되고, 확장 프로그램을 트리거하여 백준 페이지에 코드를 붙여넣어야 한다.

3. **하단 툴바**
   - 미디어 제어(Mic/Cam/Speaker), 화이트보드, 설정 버튼이 접근 가능해야 한다.

---

## 🎨 UI Specification

### 참조 와이어프레임
- [IDE 기본 화면 (내 코드 편집)](../../../pics/look_own_code_ide.svg)
- [코드 리뷰 댓글 기능](../../../pics/code_review_by_chat.svg)

### IDE Toolbar (상단)
```
┌──────────────────────────────────────────────────────────────────┐
│ [Python ▼]  ◎ CodeNinja의 코드 열람 중     [🌙][📋][💬][📤 제출] │
│     │              │                         │   │   │     │     │
│  언어선택     열람모드 표시                 테마 복사 댓글  제출   │
└──────────────────────────────────────────────────────────────────┘
```

### Toolbar 버튼 상세
| 버튼 | 아이콘 | 기능 |
|------|--------|------|
| **언어 선택** | `[Python ▼]` | 드롭다운으로 C++, Python, Java 등 선택 |
| **열람 모드 표시** | `◎ {닉네임}의 코드 열람 중` | 타인 코드 열람 시 표시, 평상시 숨김 |
| **테마 토글** | `🌙` | 라이트/다크 테마 전환 |
| **복사** | `📋` | 현재 코드를 클립보드에 복사 |
| **댓글** | `💬` | 현재 보고 있는 코드에 대한 댓글 스레드 열기 (Right Panel) |
| **제출** | `📤 제출` | 확장 프로그램 트리거하여 백준에 제출 |

### IDE 영역 (Monaco Editor)
```
┌──────────────────────────────────────────────────────────────────┐
│ [Python ▼]  ◎ CodeNinja의 코드 열람 중     [🌙][📋][💬][📤 제출] │
├──────────────────────────────────────────────────────────────────┤
│  1 │ import heapq                                                │
│  2 │ import sys                                                  │
│  3 │ input = sys.stdin.readline                                  │
│  4 │ INF = int(1e9)                                              │
│  5 │                                                             │
│  6 │ V, E = map(int, input().split())                            │
│  7 │ K = int(input())                                            │
│  8 │ graph = [[] for _ in range(V + 1)]                          │
│  9 │ distance = [INF] * (V + 1)                                  │
│ 10 │                                                             │
│ 11 │ for _ in range(E):                                          │
│ 12 │     u, v, w = map(int, input().split())                     │
│ 13 │     graph[u].append((v, w))                                 │
│    │                                                             │
│    │ def dijkstra(start):                                        │
│    │     ...                                                     │
└──────────────────────────────────────────────────────────────────┘
```

### 하단 Control Bar
```
┌──────────────────────────────────────────────────────────────────┐
│        [🎤]  [📷]  [✏️]  [⚙️]                                     │
│         │     │     │     │                                      │
│       마이크  카메라 화이트 설정                                   │
│       토글   토글   보드                                          │
└──────────────────────────────────────────────────────────────────┘
```

### Control Bar 버튼 상세
| 버튼 | 상태 | 동작 |
|------|------|------|
| **🎤 마이크** | ON: 활성 / OFF: 빨간 X 표시 | 클릭 시 마이크 토글 |
| **📷 카메라** | ON: 활성 / OFF: 빨간 X 표시 | 클릭 시 카메라 토글 |
| **✏️ 화이트보드** | 비활성: 기본 / 활성: 강조 | 클릭 시 화이트보드 오버레이 토글 |
| **⚙️ 설정** | - | 클릭 시 설정 모달 (오디오/비디오 장치 선택) |

### 열람 중 하단 알림 배너
```
┌──────────────────────────────────────────────────────────────────┐
│ 🟠 타인의 코드를 열람 중입니다. 내 타일을 클릭하면 내 코드로 돌아 갑니다. │
└──────────────────────────────────────────────────────────────────┘
```
- 타인 코드 열람 모드(SPLIT_REALTIME, SPLIT_SAVED)일 때 IDE 하단에 표시
- 분홍/주황색 배경으로 눈에 띄게 표시

### 댓글 기능 (💬 클릭 시 Right Panel)
```
┌─────────────────────────────┐
│ 디자인 개선                  │  ← 섹션 제목
│                             │
│ CodeNinja님의 스도쿠에 대한   │
│ 댓글                        │
├─────────────────────────────┤
│ [💬 이런 생각은 어떻게      │
│     하셨나요?           📤] │  ← 댓글 입력창
└─────────────────────────────┘
```

---

## 🛠 Implementation Tasks

- [ ] Monaco Editor 설정 핸들러 구현 (테마, 언어, 폰트 크기)
- [ ] IDE Toolbar 컴포넌트 구현 (언어 선택, 테마 토글, 복사, 댓글, 제출)
- [ ] `SubmissionHandler` 구현 (`window.postMessage` to Extension)
- [ ] 하단 Control Bar 컴포넌트 구현 (마이크, 카메라, 화이트보드, 설정)
- [ ] 열람 모드 상태 표시 UI (상단 배너 + 하단 알림)
- [ ] 댓글 스레드 연동 (S4-9 채팅과 연계)
