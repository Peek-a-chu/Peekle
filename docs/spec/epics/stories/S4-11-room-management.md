# S4-11. 방 관리 (Header Menu)

## 📌 Story Information

- **Epic**: Epic-04 (Study)
- **Story ID**: S4-11
- **Sprint**: TBD
- **Estimated Effort**: 0.5 day
- **Priority**: Low
- **Dependencies**: Epic-04
- **Status**: Ready

---

## 🧾 User Story

**As a** 방장
**I want to** 방 설정을 변경하거나 방을 삭제하고 싶다
**So that** 스터디 운영 정책을 변경하거나 종료하기 위함이다

---

## ✅ Acceptance Criteria

1. **방장 기능**
   - 방장은 방 제목, [설명] 등을 수정하거나 방을 삭제할 수 있어야 한다.

2. **일반 유저**
   - 일반 유저는 "방 나가기" 기능을 사용할 수 있다.

---

## 🎨 UI Specification

### 참조 와이어프레임

- [방 설정 모달](../../../pics/study_room_read_other.svg)

### Header 메뉴 접근

```
┌──────────────────────────────────────────────────────────────────┐
│ [←] 알고리즘 마스터 스터디  📅 1월 16일    [👥 초대하기] [⚙️설정] [⋮] │
└──────────────────────────────────────────────────────────────────┘
                                                              │
                                                              ▼
                                              ┌─────────────────────┐
                                              │ [⚙️ 방 정보 수정]    │  ← 방장만
                                              │ [🚪 방 나가기]       │
                                              └─────────────────────┘
```

### 방 정보 수정 모달 (방장 전용)

```
┌──────────────────────────────────────┐
│ 방 정보 수정                    [X]   │
├──────────────────────────────────────┤
│                                      │
│ 방 제목                              │
│ ┌──────────────────────────────────┐ │
│ │ 알고리즘 마스터 스터디             │ │
│ └──────────────────────────────────┘ │
│                                      │
│ 방 설명                              │
│ ┌──────────────────────────────────┐ │
│ │                                  │ │
│ │ 매주 월/수/금 알고리즘 문제를     │ │
│ │ 함께 풀어요!                     │ │
│ │                                  │ │
│ └──────────────────────────────────┘ │
│                                      │
├──────────────────────────────────────┤
│ [🗑 방 삭제]                  [저장]  │
└──────────────────────────────────────┘
```

### 모달 필드 상세

| 필드        | 타입       | 제한       | 필수 |
| ----------- | ---------- | ---------- | ---- |
| **방 제목** | text input | 최대 100자 | O    |
| **방 설명** | textarea   | 최대 500자 | X    |

### 방 삭제 확인 모달 (방장 전용)

```
┌──────────────────────────────────────┐
│ 방 삭제                        [X]   │
├──────────────────────────────────────┤
│                                      │
│ ⚠️ 정말로 이 스터디를 삭제하시겠습니까? │
│                                      │
│ • 모든 문제 기록이 삭제됩니다          │
│ • 채팅 기록이 삭제됩니다              │
│ • 이 작업은 되돌릴 수 없습니다         │
│                                      │
├──────────────────────────────────────┤
│ [취소]                   [삭제하기]   │
└──────────────────────────────────────┘
```

- "삭제하기" 버튼은 빨간색으로 강조

### 방 나가기 확인 모달 (일반 유저)

```
┌──────────────────────────────────────┐
│ 방 나가기                      [X]   │
├──────────────────────────────────────┤
│                                      │
│ 이 스터디에서 나가시겠습니까?          │
│                                      │
│ 나간 후에도 초대 코드로 다시           │
│ 참여할 수 있습니다.                   │
│                                      │
├──────────────────────────────────────┤
│ [취소]                   [나가기]     │
└──────────────────────────────────────┘
```

### 방장이 나가는 경우

```
┌──────────────────────────────────────┐
│ 방 나가기                      [X]   │
├──────────────────────────────────────┤
│                                      │
│ ⚠️ 방장은 나가기 전에 다른 멤버에게    │
│ 방장을 위임해야 합니다.               │
│                                      │
│ 참여자 탭에서 방장 위임을 먼저         │
│ 진행해주세요.                        │
│                                      │
├──────────────────────────────────────┤
│                            [확인]    │
└──────────────────────────────────────┘
```

### API 연동

| 기능             | 메서드   | 엔드포인트                     | 권한      |
| ---------------- | -------- | ------------------------------ | --------- |
| **방 정보 수정** | `PATCH`  | `/api/studies/{id}`            | 방장      |
| **방 삭제**      | `DELETE` | `/api/studies/{id}`            | 방장      |
| **방 나가기**    | `DELETE` | `/api/studies/{id}/members/me` | 모든 멤버 |

### 삭제/나가기 후 리다이렉트

- 방 삭제 → 스터디 목록 페이지 (`/study`)
- 방 나가기 → 스터디 목록 페이지 (`/study`)
- 강퇴당한 경우 → 스터디 목록 페이지 + 알림 토스트

---

## 🛠 Implementation Tasks

- [ ] Header 더보기 메뉴(⋮) 또는 설정 버튼 구현
- [ ] 방 정보 수정 모달 구현 (제목, 설명 수정)
- [ ] 방 삭제 확인 모달 구현 (방장 전용)
- [ ] 방 나가기 확인 모달 구현
- [ ] 방장 나가기 제한 처리 (위임 필요 안내)
- [ ] 방 수정 API 연동 (`PATCH /api/study/{id}`)
- [ ] 방 삭제 API 연동 (`DELETE /api/study/{id}`)
- [ ] 방 나가기 API 연동 (`DELETE /api/study/{id}/members/me`)
- [ ] 삭제/나가기 후 스터디 목록으로 리다이렉트
